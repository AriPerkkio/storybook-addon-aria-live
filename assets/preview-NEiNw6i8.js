function p(t){return t!=null&&t.nodeType===Node.ELEMENT_NODE}function L(t){return t!=null&&t instanceof ShadowRoot}function $(t){return t!=null&&t.nodeType===Node.DOCUMENT_NODE}let v={includeShadowDom:!1};function q(t){v={...v,...t}}function R(){return v}function g(t,...e){const n=t.closest(...e);if(n||!R().includeShadowDom)return n;const r=t.getRootNode();return L(r)?g(r.host,...e):null}function B(t){return t.parentNode||!R().includeShadowDom?t.parentNode:L(t)?t.host:null}function F(t){return R().includeShadowDom&&p(t)&&t.shadowRoot?F(t.shadowRoot):t.childNodes}function H(t,...e){return R().includeShadowDom?[t,...P([t])].reduce((r,i)=>[...r,...i.querySelectorAll(...e)],[]):Array.from(t.querySelectorAll(...e))}function P(t,e=[]){if(t.length===0)return e;const n=t.reduce((r,i)=>[...r,...j(i)],[]);return P(n,[...e,...n])}function j(t){const e=t.getRootNode({composed:!0}),n=[];if(!$(e))return n;p(t)&&t.shadowRoot&&n.push(t.shadowRoot);const r=e.createTreeWalker(t,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_DOCUMENT_FRAGMENT,{acceptNode:k});function i(d){const a=r.nextNode();return!p(a)||!a.shadowRoot?d:i([...d,a.shadowRoot])}return i(n)}function k(t){return p(t)&&t.shadowRoot?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}const V=["status","log","alert"],I=['[role="status"]','[role="log"]','[role="alert"]','[aria-live="polite"]','[aria-live="assertive"]',"output"].join(", "),G='[aria-hidden="true"]';function O(t){const e=H(t,I);return p(t)&&E(t)!=="off"&&S(t)?e.concat(t).filter(K):e}function A(t){if(p(t))return t;const e=B(t);return e?A(e):null}function z(t){return V.includes(t)||x(t)}function S(t){const e=A(t);return e!=null&&g(e,"html")!=null}function C(t){const e=A(t);if(!e||e.getAttribute("aria-hidden")==="true"||e.getAttribute("aria-live")==="off")return!0;const n=e.getAttribute("role"),r=e.getAttribute("aria-live");return(n==="marquee"||n==="timer")&&r!=="polite"&&r!=="assertive"?!0:g(e,G)!=null}function y(t){return t?g(t,I):null}function x(t){return t==="polite"||t==="assertive"||t==="off"}function E(t){if(!t||!p(t))return"off";const e=t.getAttribute("aria-live");if(x(e))return e;const n=t.getAttribute("role");if(n==="marquee"||n==="timer")return"off";if(n==="status"||n==="log")return"polite";if(n==="alert")return"assertive";if(t.tagName.toLowerCase()==="output")return"polite";const r=y(t);return E(r===t?y(t.parentElement):r)}const Y=/\s+/g;function w(t){const e=t.trim().replace(Y," ");return e.length>0?e:null}function T(t){if(!t||C(t))return null;if(t.nodeType===Node.TEXT_NODE)return t.textContent?w(t.textContent):null;const e=F(t);if(e.length===0)return null;const n=Array.from(e).map(T).filter(Boolean).join(" ");return w(n)}function K(t,e,n){return n.indexOf(t)===e}function _(t,e,n){const r=Object.getOwnPropertyDescriptor(t,e);if(!r||!r.set)throw new Error(`Unable to intercept ${String(e)}. No descriptor available.`);const i=r.set;return r.set=function(a){const l=i.call(this,a);return n.call(this,a),l},Object.defineProperty(t,e,r),function(){r.set=i,Object.defineProperty(t,e,r)}}function c(t,e,n,r="AFTER"){const i=t[e];if(typeof i!="function")throw new Error(`Expected ${String(e)} to be a function. Received ${typeof i}: ${i}`);if(typeof n!="function")throw new Error(`Expected method to be a function. Received ${typeof n}: ${n}`);function d(...a){r==="BEFORE"&&n.call(this,...a);const l=i.call(this,...a);return r==="AFTER"&&n.call(this,...a),l}return t[e]=d,function(){t[e]=i}}const f=new Map;function Q(t){q({includeShadowDom:t.includeShadowDom||!1});const e=(o,s)=>{const u=w(o);u&&t.onCapture(u,s)};function n(o){if(f.size===0)return;const s=A(o);if(!s)return;const u=y(s);if(u){const h=E(u);if(h!=="off"&&S(u)){const b=f.get(u),m=T(u)||"";if(C(s)){b&&f.set(u,m);return}b!==m&&(e(m,h),f.set(u,m))}}}function r(o){if(f.has(o)||C(o))return;const s=E(o);if(s==="off")return;const u=T(o);f.set(o,u),u&&o.getAttribute("role")==="alert"&&e(u,s)}function i(o){const s=p(o)?o:document;for(const u of O(s))r(u)}function d(){n(this)}function a(){n(this)}function l(o){i(o),n(o)}function N(){l(this)}function M(...o){if(!p(this)||!S(this)||!o[0])return;const[s]=o;switch(s){case"role":case"aria-live":{const u=f.has(this),h=z(o[1]);if(u&&!h){f.delete(this);return}if(!u&&h)return i(this);if(u&&h&&E(this)==="assertive")return n(this);break}case"aria-hidden":return i(this),n(this);default:return}}function U(...o){if(!p(this))return;const[s]=o;s==="aria-hidden"&&(i(this),n(this))}function D(...o){if(f.size===0)return;const[s]=o;if(s==null||!p(s))return n(this);const u=[s,...O(s)];for(const h of u)f.has(h)&&f.delete(h);n(this)}const W=[c(DocumentFragment.prototype,"removeChild",D),c(DocumentFragment.prototype,"replaceChildren",l),c(DocumentFragment.prototype,"append",l),c(DocumentFragment.prototype,"prepend",l),c(Element.prototype,"setAttribute",M),c(Element.prototype,"removeAttribute",X,"BEFORE"),c(Element.prototype,"removeAttribute",U,"AFTER"),c(Element.prototype,"removeChild",D),c(Element.prototype,"replaceChildren",l),c(Element.prototype,"insertAdjacentElement",N),c(Element.prototype,"insertAdjacentHTML",N),c(Element.prototype,"insertAdjacentText",N),c(Element.prototype,"before",l),c(Element.prototype,"append",l),c(Element.prototype,"prepend",l),c(Node.prototype,"appendChild",l),c(Node.prototype,"insertBefore",l),c(Node.prototype,"replaceChild",l),_(Node.prototype,"textContent",d),_(Node.prototype,"nodeValue",a)];return i(document),function(){W.splice(0).forEach(s=>s()),f.clear()}}function X(...t){if(f.size===0||!p(this))return;const[e]=t;this.hasAttribute(e)&&(e==="role"||e==="aria-live")&&f.has(this)&&f.delete(this)}const{useParameter:J,useChannel:Z,useEffect:tt}=__STORYBOOK_MODULE_PREVIEW_API__;var et="storybook/aria-live",nt={CAPTURE:`${et}/capture`};function rt(t){let{includeShadowDom:e}=J("aria-live",{includeShadowDom:!1}),n=Z({});return tt(()=>Q({includeShadowDom:e,onCapture:function(r,i){n(nt.CAPTURE,{textContent:r,politenessSetting:i})}}),[e]),t()}var ot=[rt];export{ot as decorators};
